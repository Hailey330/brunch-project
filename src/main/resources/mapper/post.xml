<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.project.brunch.domain.post.PostMapper">
  <update id="UpdateByPost">
    SELECT coverImg FROM post WEHRE id=#{id}
  </update>
  
  <select id="PostList" resultType="com.project.brunch.dto.PostDto">
  	SELECT p.id, p.content, p.coverImg, p.createDate, p.postType, p.readCount, p.subTitle, p.title, p.userId , u.nickname
	FROM post p INNER JOIN user u
	ON p.userid = u.id
  </select>
  
  <select id ="findByTodayPost" resultType="com.project.brunch.domain.post.Post">
  	  SELECT * 
  	  FROM post 
  	  WHERE createDate > curdate( )
  </select>
  
  <select id="findByreadCountRank" resultType="com.project.brunch.dto.AdminDto">
  	SELECT p.createDate, p.readCount, p.title, u.nickname
	FROM post p INNER JOIN user u
	ON p.userid = u.id
	order by readCount desc
	limit 5
  </select>
  
</mapper>
